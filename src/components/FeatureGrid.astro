---
import type { Feature } from '../data/features';
import { featureSets } from '../data/features';
const { lang = 'en' } = Astro.props as { lang?: string };
const features: Feature[] = featureSets[lang] || featureSets.en;
---
<section class="features" aria-labelledby="features-heading">
  <div class="container">
    <h2 id="features-heading" class="section-title">{lang === 'en' ? 'Capabilities' : lang === 'es' ? 'Capacidades' : 'Capacitats'}</h2>
    <div class="feature-grid">
      {features.map(f => (
        <div class="feature-card" data-id={f.id}>
          <div class="icon" aria-hidden="true">{f.icon}</div>
          <h3>{f.title}</h3>
          <p>{f.description}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
.features { padding: var(--space-xl) 0; position: relative; }
.feature-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap: 1.2rem; }
.feature-card { background: var(--background-card); border: 1px solid var(--border); padding: 1.25rem 1.1rem 1.4rem; border-radius: 14px; position: relative; overflow: hidden; backdrop-filter: blur(6px); transition: border-color .25s, transform .25s, box-shadow .25s; }
.feature-card::before { content: ''; position: absolute; inset: 0; background: radial-gradient(circle at 30% 20%, rgba(255,217,61,0.08), transparent 60%); opacity: 0; transition: opacity .35s; }
.feature-card:hover { border-color: var(--accent-red); transform: translateY(-6px); box-shadow: 0 10px 32px -8px rgba(218,41,28,0.25); }
.feature-card:hover::before { opacity: 1; }
.icon { font-size: 1.75rem; line-height: 1; margin-bottom: .75rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,.25)); }
.feature-card h3 { font-size: 1rem; margin: 0 0 .4rem; font-weight: 600; letter-spacing: -.01em; }
.feature-card p { font-size: .85rem; line-height: 1.45; color: var(--tertiary); margin: 0; }
@media (prefers-reduced-motion: no-preference) { .feature-card { will-change: transform; } }
@media (max-width: 640px) { .feature-card { padding: 1rem; } }
</style>
