---
import type { Lang } from '../../data/i18n';
import { aboutData } from '../../data/i18n';
import { scholarMetrics } from '../../data/metrics';

export interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const about = aboutData[lang] || aboutData.en;

const sectionHeading: Record<Lang, string> = {
  en: 'About',
  es: 'Sobre mi',
  ca: 'Sobre mi',
};
---

<section id="about" class="ml-about section" aria-labelledby="about-heading">
  <div class="container">
    <div data-animate="fade-up">
      <h2 id="about-heading" class="ml-about__heading">{sectionHeading[lang]}</h2>
      <div class="ml-about__accent" aria-hidden="true"></div>
    </div>

    <div class="ml-about__content" data-animate="fade-up" data-delay="100">
      <p class="ml-about__bio">{about.bio}</p>
      <p class="ml-about__focus-intro">{about.focusIntro}</p>
    </div>

    <div class="ml-about__grid">
      {about.areas.map((area, i) => (
        <article
          class={`ml-about__card ml-about__card--${i + 1}`}
          data-animate="fade-up"
          data-delay={String((i + 1) * 100 + 100)}
        >
          <h3 class="ml-about__card-title">{area.title}</h3>
          <p class="ml-about__card-desc">{area.description}</p>
        </article>
      ))}
    </div>

    <p class="ml-about__patent" data-animate="fade-up" data-delay="500">
      With {scholarMetrics.publications} {about.patent}
    </p>
  </div>
</section>

<style>
  .ml-about {
    background: var(--background-alt, #0d1320);
    padding: 6rem 0;
  }

  .ml-about__heading {
    font-family: var(--font-display, 'Outfit', sans-serif);
    font-weight: 700;
    font-size: clamp(2rem, 4.5vw, 2.75rem);
    color: var(--text-primary, #F1F5F9);
    text-align: center;
    margin-bottom: 0.5rem;
  }

  .ml-about__accent {
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--accent-red, #DA291C) 0%, var(--accent-yellow, #FFD93D) 100%);
    margin: 0 auto 3rem;
    border-radius: 2px;
  }

  .ml-about__content {
    max-width: 680px;
    margin: 0 auto 2.5rem;
  }

  .ml-about__bio {
    font-family: var(--font-primary, sans-serif);
    font-size: 1.0625rem;
    color: var(--text-light, #94A3B8);
    line-height: 1.75;
    margin-bottom: 1.25rem;
  }

  .ml-about__focus-intro {
    font-family: var(--font-primary, sans-serif);
    font-size: 1rem;
    color: var(--text-light, #94A3B8);
    line-height: 1.7;
    margin-bottom: 0;
  }

  .ml-about__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2.5rem;
  }

  .ml-about__card {
    background: var(--surface-glass, rgba(15,23,42,0.6));
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--border-light, rgba(148,163,184,0.12));
    border-radius: var(--card-radius, 16px);
    padding: 2rem;
    transition: transform 0.3s ease, border-color 0.2s ease, box-shadow 0.3s ease;
  }

  .ml-about__card--1 { border-top: 3px solid #DA291C; }
  .ml-about__card--2 { border-top: 3px solid #3B82F6; }
  .ml-about__card--3 { border-top: 3px solid #22C55E; }

  .ml-about__card:hover {
    transform: translateY(-4px);
    border-color: rgba(148,163,184,0.18);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05);
  }

  .ml-about__card--1:hover { border-top-color: #DA291C; }
  .ml-about__card--2:hover { border-top-color: #3B82F6; }
  .ml-about__card--3:hover { border-top-color: #22C55E; }

  .ml-about__card-title {
    font-family: var(--font-display, 'Outfit', sans-serif);
    font-weight: 600;
    font-size: 1.0625rem;
    color: var(--text-primary, #E5E7EB);
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  .ml-about__card-desc {
    font-family: var(--font-primary, sans-serif);
    font-size: 0.9375rem;
    color: var(--text-light, #94A3B8);
    line-height: 1.6;
    margin-bottom: 0;
  }

  .ml-about__patent {
    max-width: 720px;
    margin: 0 auto;
    font-family: var(--font-primary, sans-serif);
    font-size: 0.9375rem;
    color: var(--text-muted, #8494A7);
    line-height: 1.65;
    text-align: center;
  }

  @supports not (backdrop-filter: blur(16px)) {
    .ml-about__card {
      background: var(--background-card, #111827);
    }
  }

  @media (max-width: 768px) {
    .ml-about {
      padding: 4rem 0;
    }

    .ml-about__grid {
      grid-template-columns: 1fr;
    }
  }
</style>
