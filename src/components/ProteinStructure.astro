<script>
  declare var NGL: any;
  document.addEventListener('DOMContentLoaded', function () {
    var stage = new NGL.Stage("ngl-viewer");

    // Set transparent background
    stage.setParameters({ backgroundColor: "transparent" });

    // Adjust lighting for a softer look
    stage.setParameters({
        clipNear: 0,
        clipFar: 100,
        lightDirection: [1, 1, 1], // Directional light from top-right-front
        lightColor: 0xFFFFFF, // White light
        lightIntensity: 0.8, // Slightly reduced intensity
        ambientColor: 0x404040, // Soft ambient light
        ambientIntensity: 0.5 // Increased ambient intensity
    });

    // Function to load and style a protein
    function loadAndStyleProtein(pdbId, colorScheme, position, selectionColor) {
        stage.loadFile("rcsb://" + pdbId, { defaultRepresentation: false }).then(function (component) {
            component.addRepresentation("cartoon", {
                color: colorScheme,
                quality: "smooth",
                // Add a subtle metallic sheen effect
                metalness: 0.5,
                roughness: 0.5
            });

            // Position the components if needed (adjust as per desired layout)
            if (position) {
                component.setPosition(position);
            }

            // Enhanced selection highlighting
            component.addRepresentation("licorice", {
                sele: "10-20", // Example selection
                color: selectionColor,
                radius: 0.3 // Make it slightly thicker
            });

            stage.autoView();
        });
    }

    // Load LL-37 (2K6O) with a subtle gradient color scheme and a specific selection color
    // Using a custom color array for a more controlled gradient
    const ll37Colors = [
        [0xADD8E6, 0], // Light Blue
        [0x87CEEB, 0.5], // Sky Blue
        [0x6495ED, 1]  // Cornflower Blue
    ];
    loadAndStyleProtein("2K6O", ll37Colors, [0, 0, 0], "#403C9F"); // Main protein, subtle blue gradient, dark purple highlight

    // Load a nanobinder (1ZVH) with a different subtle gradient color scheme and a specific selection color
    const nanobinderColors = [
        [0xFFB6C1, 0], // Light Pink
        [0xFF69B4, 0.5], // Hot Pink
        [0xC71585, 1]  // Medium Violet Red
    ];
    loadAndStyleProtein("1ZVH", nanobinderColors, [50, 0, 0], "#403C9F"); // Nanobinder, subtle pink gradient, dark purple highlight

    // Enable spinning
    stage.setSpin([0, 1, 0], 0.05); // Spin around Y-axis

    // Handle window resizing
    window.addEventListener('resize', function () {
        stage.handleResize();
    });
  });
</script>