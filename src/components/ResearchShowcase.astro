---
// ResearchShowcase.astro - Main research section with video cards
import ResearchVideoCard from './ResearchVideoCard.astro';
import SmartVideo from './SmartVideo.astro';

export interface Props {
  lang: 'en' | 'es' | 'ca';
}

const { lang } = Astro.props;

const researchProjects = [
  {
    title: lang === 'en' ? 'Antimicrobial Peptide Engineering' : 
           lang === 'es' ? 'Ingeniería de Péptidos Antimicrobianos' : 
           'Enginyeria de Pèptids Antimicrobians',
    description: lang === 'en' ? 'Engineered host defense peptides as robust, bioactive protein nanoparticles for combating antimicrobial resistance.' :
                 lang === 'es' ? 'Péptidos de defensa del huésped diseñados como nanopartículas proteicas robustas y bioactivas para combatir la resistencia antimicrobiana.' :
                 'Pèptids de defensa de l\'hoste dissenyats com a nanopartícules proteiques robustes i bioactives per combatre la resistència antimicrobiana.',
    videoMp4: '/Portfolio/media/antimicrobial-membrane-disruption-1x1.mp4',
    videoWebm: '/Portfolio/media/antimicrobial-membrane-disruption-1x1.webm',
    videoPoster: '/Portfolio/media/antimicrobial-membrane-disruption-1x1-poster.jpg',
    badges: ['First Author', 'Antimicrobial', 'Nanotechnology'],
    isFirstAuthor: true
  },
  {
    title: lang === 'en' ? 'Functional Inclusion Bodies' : 
           lang === 'es' ? 'Cuerpos de Inclusión Funcionales' : 
           'Cossos d\'Inclusió Funcionals',
    description: lang === 'en' ? 'Revolutionary approach using inclusion bodies as bioactive nanoparticles while maintaining protein functionality.' :
                 lang === 'es' ? 'Enfoque revolucionario utilizando cuerpos de inclusión como nanopartículas bioactivas manteniendo la funcionalidad proteica.' :
                 'Enfocament revolucionari utilitzant cossos d\'inclusió com a nanopartícules bioactives mantenint la funcionalitat proteica.',
    videoMp4: '/Portfolio/media/inclusion-bodies-assembly-1x1.mp4',
    videoWebm: '/Portfolio/media/inclusion-bodies-assembly-1x1.webm',
    videoPoster: '/Portfolio/media/inclusion-bodies-assembly-1x1-poster.jpg',
    badges: ['First Author', 'Protein Engineering', 'Review'],
    isFirstAuthor: true
  },
  {
    title: lang === 'en' ? 'AAV Vector Engineering' : 
           lang === 'es' ? 'Ingeniería de Vectores AAV' : 
           'Enginyeria de Vectors AAV',
    description: lang === 'en' ? 'Advanced capsid evolution technology for improved gene delivery and CAR-T cell generation applications.' :
                 lang === 'es' ? 'Tecnología avanzada de evolución de cápsidas para mejorar la entrega génica y aplicaciones de generación de células CAR-T.' :
                 'Tecnologia avançada d\'evolució de càpsides per millorar el lliurament gènic i aplicacions de generació de cèl·lules CAR-T.',
    videoMp4: '/Portfolio/media/aav-capsid-evolution-1x1.mp4',
    videoWebm: '/Portfolio/media/aav-capsid-evolution-1x1.webm',
    videoPoster: '/Portfolio/media/aav-capsid-evolution-1x1-poster.jpg',
    badges: ['First Author', 'Gene Therapy', 'Vector Design'],
    isFirstAuthor: true
  },
  {
    title: lang === 'en' ? 'Multidomain Protein Design' : 
           lang === 'es' ? 'Diseño de Proteínas Multidominio' : 
           'Disseny de Proteïnes Multidomini',
    description: lang === 'en' ? 'Domain editing strategies to modulate immune and antimicrobial properties of recombinant proteins.' :
                 lang === 'es' ? 'Estrategias de edición de dominios para modular las propiedades inmunes y antimicrobianas de proteínas recombinantes.' :
                 'Estratègies d\'edició de dominis per modular les propietats immunes i antimicrobianes de proteïnes recombinants.',
    videoMp4: '/Portfolio/media/multidomain-proteins-1x1.mp4',
    videoWebm: '/Portfolio/media/multidomain-proteins-1x1.webm', 
    videoPoster: '/Portfolio/media/multidomain-proteins-1x1-poster.jpg',
    badges: ['First Author', 'Protein Design', 'Immunology'],
    isFirstAuthor: true
  }
];
---

<section id="research" class="section bg-gray-950 relative">
  <!-- Background banner video -->
  <div class="absolute top-0 left-0 w-full h-32 overflow-hidden opacity-20">
    <SmartVideo
      mp4Src="/Portfolio/media/peptide-landscape-21x9.mp4"
      webmSrc="/Portfolio/media/peptide-landscape-21x9.webm"
      poster="/Portfolio/media/peptide-landscape-21x9-poster.jpg"
      aspect="21/9"
      className="w-full h-full object-cover"
      alt="Abstract peptide embedding space visualization"
    />
  </div>

  <div class="container relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
        {lang === 'en' ? 'Research Focus' : 
         lang === 'es' ? 'Enfoque de Investigación' : 
         'Enfocament de Recerca'}
      </h2>
      <div class="accent-bar mx-auto"></div>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
        {lang === 'en' ? 'Bridging computational design and experimental validation to develop next-generation antimicrobial therapies and gene delivery systems.' :
         lang === 'es' ? 'Conectando el diseño computacional y la validación experimental para desarrollar terapias antimicrobianas y sistemas de entrega génica de nueva generación.' :
         'Connectant el disseny computacional i la validació experimental per desenvolupar teràpies antimicrobianes i sistemes de lliurament gènic de nova generació.'}
      </p>
    </div>

    <!-- Research Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
      {researchProjects.map(project => (
        <ResearchVideoCard
          title={project.title}
          description={project.description}
          videoMp4={project.videoMp4}
          videoWebm={project.videoWebm}
          videoPoster={project.videoPoster}
          badges={project.badges}
          isFirstAuthor={project.isFirstAuthor}
          lang={lang}
        />
      ))}
    </div>

    <!-- Workflow Banner -->
    <div class="mt-16 bg-gray-900 rounded-2xl p-8 border border-gray-700">
      <div class="grid md:grid-cols-2 gap-8 items-center">
        <div>
          <h3 class="text-2xl font-bold text-white mb-4">
            {lang === 'en' ? 'Design → Assay → Feedback Loop' :
             lang === 'es' ? 'Diseño → Ensayo → Bucle de Retroalimentación' :
             'Disseny → Assaig → Bucle de Retroalimentació'}
          </h3>
          <p class="text-gray-300 leading-relaxed">
            {lang === 'en' ? 'Computational design guides experimental validation, creating a continuous improvement cycle for therapeutic development.' :
             lang === 'es' ? 'El diseño computacional guía la validación experimental, creando un ciclo de mejora continua para el desarrollo terapéutico.' :
             'El disseny computacional guia la validació experimental, creant un cicle de millora contínua per al desenvolupament terapèutic.'}
          </p>
        </div>
        <div>
          <SmartVideo
            mp4Src="/Portfolio/media/design-assay-feedback-16x9.mp4"
            webmSrc="/Portfolio/media/design-assay-feedback-16x9.webm"
            poster="/Portfolio/media/design-assay-feedback-16x9-poster.jpg"
            aspect="16/9"
            alt="Workflow diagram showing design to assay feedback loop"
          />
        </div>
      </div>
    </div>
  </div>
</section>
