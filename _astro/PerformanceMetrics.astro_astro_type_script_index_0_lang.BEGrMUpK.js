var t=Object.defineProperty,e=(e,r,i)=>((e,r,i)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i)(e,"symbol"!=typeof r?r+"":r,i);import{c as r,m as i,d as s,r as o}from"./vendor-utils.WgPuaxRy.js";const a=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("animated")})});document.querySelectorAll(".metric-card").forEach(t=>{a.observe(t)});let n=class{constructor(t){e(this,"metrics",[]),e(this,"budget"),e(this,"observers",new Map),e(this,"isInitialized",!1),this.budget={lcp:2500,fid:100,cls:.1,fcp:1800,ttfb:800,transferSize:1048576,resourceCount:50,...t}}init(){this.isInitialized||"undefined"==typeof window||(this.isInitialized=!0,this.setupWebVitalsTracking(),this.setupNavigationTracking(),this.setupResourceTracking(),this.setupCustomMetrics(),this.scheduleReporting())}setupWebVitalsTracking(){const t=window["web-vitals"];if(t){const{onLCP:e,onFID:r,onCLS:i,onFCP:s,onTTFB:o}=t;e(t=>this.recordMetric("lcp",t.value)),r(t=>this.recordMetric("fid",t.value)),i(t=>this.recordMetric("cls",t.value)),s(t=>this.recordMetric("fcp",t.value)),o(t=>this.recordMetric("ttfb",t.value))}}setupNavigationTracking(){window.addEventListener("load",()=>{requestIdleCallback(()=>{const t=performance.getEntriesByType("navigation")[0];t&&(this.recordMetric("domContentLoaded",t.domContentLoadedEventEnd),this.recordMetric("loadComplete",t.loadEventEnd),this.recordMetric("transferSize",t.transferSize))})})}setupResourceTracking(){if("PerformanceObserver"in window){const t=new PerformanceObserver(t=>{const e=t.getEntries();this.recordMetric("resourceCount",e.length)});t.observe({entryTypes:["resource"]}),this.observers.set("resource",t)}}setupCustomMetrics(){if(window.addEventListener("load",()=>{let t=0;if("PerformanceObserver"in window){const r=new PerformanceObserver(e=>{const r=e.getEntries();r.length>0&&(t=r[r.length-1].startTime+r[r.length-1].duration)});try{r.observe({entryTypes:["longtask"]}),this.observers.set("longtask",r)}catch(e){}}setTimeout(()=>{const e=Math.max(t+5e3,performance.now());this.recordMetric("timeToInteractive",e)},1e4)}),"PerformanceObserver"in window)try{const t=new PerformanceObserver(t=>{const e=t.getEntries();for(const r of e)"first-paint"===r.name&&this.recordMetric("firstPaint",r.startTime)});t.observe({entryTypes:["paint"]}),this.observers.set("paint",t)}catch(t){}}recordMetric(t,e){this.getCurrentMetric()[t]=e,this.checkBudgetCompliance(t,e)}getCurrentMetric(){return(0===this.metrics.length||this.isMetricComplete(this.metrics[this.metrics.length-1]))&&this.metrics.push(this.createBaseMetric()),this.metrics[this.metrics.length-1]}createBaseMetric(){const t=navigator.connection;return{timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},connection:t?{effectiveType:t.effectiveType,downlink:t.downlink}:void 0}}isMetricComplete(t){return!!(t.lcp&&t.fcp&&t.ttfb)}checkBudgetCompliance(t,e){const r=this.budget[t];r&&e>r&&window.dispatchEvent(new CustomEvent("performance-budget-exceeded",{detail:{metric:t,value:e,budget:r}}))}scheduleReporting(){setInterval(()=>{this.reportMetrics()},3e4),window.addEventListener("beforeunload",()=>{this.reportMetrics(!0)}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.reportMetrics(!0)})}reportMetrics(t=!1){const e=this.metrics.filter(t=>this.isMetricComplete(t));if(0!==e.length||t){if(window.gtag&&e.forEach(t=>{window.gtag("event","performance_metrics",{custom_map:{dimension1:t.lcp,dimension2:t.fid,dimension3:t.cls,dimension4:t.fcp,dimension5:t.ttfb}})}),"undefined"!=typeof localStorage){const t=[...JSON.parse(localStorage.getItem("performanceMetrics")||"[]"),...e].slice(-50);localStorage.setItem("performanceMetrics",JSON.stringify(t))}this.sendToReportingEndpoint(e),this.metrics=this.metrics.filter(t=>!this.isMetricComplete(t))}}sendToReportingEndpoint(t){const e=window.PERFORMANCE_REPORTING_URL;e&&0!==t.length&&("sendBeacon"in navigator?navigator.sendBeacon(e,JSON.stringify(t)):fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).catch(()=>{}))}getMetrics(){return[...this.metrics]}getBudgetStatus(){const t=this.getCurrentMetric(),e={};for(const[r,i]of Object.entries(this.budget)){const s=t[r];e[r]={current:s,budget:i,passed:!s||s<=i}}return e}destroy(){this.observers.forEach(t=>t.disconnect()),this.observers.clear(),this.isInitialized=!1}},c=null;function d(t){return c||(c=new n(t),c.init()),c}if("undefined"!=typeof window&&document.addEventListener("DOMContentLoaded",()=>{d()}),d({lcp:2500,fid:100,cls:.1,fcp:1800,ttfb:800,transferSize:1048576,resourceCount:50}),(async()=>{try{const t=window["web-vitals"];if(!t)return;const{onCLS:e,onFID:r,onFCP:i,onLCP:s,onTTFB:o}=t,a=t=>{window.gtag&&window.gtag("event",t.name,{value:Math.round(t.value),metric_id:t.id,metric_value:t.value,metric_delta:t.delta})};e(a),r(a),i(a),s(a),o(a)}catch(t){}})(),"IntersectionObserver"in window){const t=new IntersectionObserver(e=>{for(const r of e)if(r.isIntersecting){const e=r.target,i=e.dataset.src;if(i){performance.now();e.onload=()=>{performance.now()},e.src=i,e.removeAttribute("data-src")}t.unobserve(e)}},{rootMargin:"200px 0px"});document.querySelectorAll("img[data-src]").forEach(e=>t.observe(e))}window.addEventListener("performance-budget-exceeded",t=>{const{metric:e,value:r,budget:i}=t.detail;window.MONITORING_ENDPOINT&&fetch(window.MONITORING_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"budget_violation",metric:e,value:r,budget:i,timestamp:Date.now(),url:window.location.href}),keepalive:!0}).catch(()=>{})});const l=r((t,e,r)=>o`${i()}<div class="performance-metrics" data-astro-cid-5ljvaqd5> <div class="metric-card" data-astro-cid-5ljvaqd5> <div class="metric-chart" data-astro-cid-5ljvaqd5> <svg viewBox="0 0 100 60" class="metric-svg" data-astro-cid-5ljvaqd5> <defs data-astro-cid-5ljvaqd5> <linearGradient id="gradient1" x1="0%" y1="0%" x2="0%" y2="100%" data-astro-cid-5ljvaqd5> <stop offset="0%" style="stop-color:#DC2626;stop-opacity:0.8" data-astro-cid-5ljvaqd5></stop> <stop offset="100%" style="stop-color:#DC2626;stop-opacity:0" data-astro-cid-5ljvaqd5></stop> </linearGradient> </defs> <polyline class="metric-line" points="0,50 10,45 20,30 30,35 40,20 50,25 60,15 70,20 80,10 90,15 100,5" fill="none" stroke="#DC2626" stroke-width="2" data-astro-cid-5ljvaqd5></polyline> <polyline points="0,50 10,45 20,30 30,35 40,20 50,25 60,15 70,20 80,10 90,15 100,5 100,60 0,60" fill="url(#gradient1)" data-astro-cid-5ljvaqd5></polyline> </svg> </div> <div class="metric-info" data-astro-cid-5ljvaqd5> <span class="metric-label" data-astro-cid-5ljvaqd5>Antimicrobial Efficacy</span> <span class="metric-value" data-astro-cid-5ljvaqd5>95%</span> </div> </div> <div class="metric-card" data-astro-cid-5ljvaqd5> <div class="metric-chart" data-astro-cid-5ljvaqd5> <svg viewBox="0 0 100 60" class="metric-svg" data-astro-cid-5ljvaqd5> <defs data-astro-cid-5ljvaqd5> <linearGradient id="gradient2" x1="0%" y1="0%" x2="0%" y2="100%" data-astro-cid-5ljvaqd5> <stop offset="0%" style="stop-color:#EF4444;stop-opacity:0.8" data-astro-cid-5ljvaqd5></stop> <stop offset="100%" style="stop-color:#EF4444;stop-opacity:0" data-astro-cid-5ljvaqd5></stop> </linearGradient> </defs> <polyline class="metric-line" points="0,40 15,35 25,25 35,20 50,10 65,8 80,5 100,3" fill="none" stroke="#EF4444" stroke-width="2" data-astro-cid-5ljvaqd5></polyline> <polyline points="0,40 15,35 25,25 35,20 50,10 65,8 80,5 100,3 100,60 0,60" fill="url(#gradient2)" data-astro-cid-5ljvaqd5></polyline> </svg> </div> <div class="metric-info" data-astro-cid-5ljvaqd5> <span class="metric-label" data-astro-cid-5ljvaqd5>Resistance Development</span> <span class="metric-value" data-astro-cid-5ljvaqd5>â†“ 85%</span> </div> </div> <div class="metric-card" data-astro-cid-5ljvaqd5> <div class="metric-chart" data-astro-cid-5ljvaqd5> <div class="circular-progress" data-astro-cid-5ljvaqd5> <svg viewBox="0 0 100 100" data-astro-cid-5ljvaqd5> <circle cx="50" cy="50" r="45" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="6" data-astro-cid-5ljvaqd5></circle> <circle cx="50" cy="50" r="45" fill="none" stroke="url(#circular-gradient)" stroke-width="6" stroke-dasharray="283" stroke-dashoffset="70" stroke-linecap="round" transform="rotate(-90 50 50)" data-astro-cid-5ljvaqd5></circle> <defs data-astro-cid-5ljvaqd5> <linearGradient id="circular-gradient" data-astro-cid-5ljvaqd5> <stop offset="0%" stop-color="#DC2626" data-astro-cid-5ljvaqd5></stop> <stop offset="100%" stop-color="#EF4444" data-astro-cid-5ljvaqd5></stop> </linearGradient> </defs> <text x="50" y="50" text-anchor="middle" dy="0.3em" fill="white" font-size="20" font-weight="bold" data-astro-cid-5ljvaqd5>75%</text> </svg> </div> </div> <div class="metric-info" data-astro-cid-5ljvaqd5> <span class="metric-label" data-astro-cid-5ljvaqd5>Selectivity Index</span> <span class="metric-value" data-astro-cid-5ljvaqd5>SI > 100</span> </div> </div> </div>  ${s(t,"/Users/ramon/projects/Portfolio/src/components/PerformanceMetrics.astro?astro&type=script&index=0&lang.ts")}`,"/Users/ramon/projects/Portfolio/src/components/PerformanceMetrics.astro",void 0),p=Object.freeze(Object.defineProperty({__proto__:null,default:l,file:"/Users/ramon/projects/Portfolio/src/components/PerformanceMetrics.astro",url:void 0},Symbol.toStringTag,{value:"Module"})),v=r((t,e,r)=>o`${s(t,"/Users/ramon/projects/Portfolio/src/components/PerformanceMonitor.astro?astro&type=script&index=0&lang.ts")}`,"/Users/ramon/projects/Portfolio/src/components/PerformanceMonitor.astro",void 0),f=Object.freeze(Object.defineProperty({__proto__:null,default:v,file:"/Users/ramon/projects/Portfolio/src/components/PerformanceMonitor.astro",url:void 0},Symbol.toStringTag,{value:"Module"})),m=r((t,e,r)=>o`${s(t,"/Users/ramon/projects/Portfolio/src/components/PerformanceOptimizations.astro?astro&type=script&index=0&lang.ts")} `,"/Users/ramon/projects/Portfolio/src/components/PerformanceOptimizations.astro",void 0),u=Object.freeze(Object.defineProperty({__proto__:null,default:m,file:"/Users/ramon/projects/Portfolio/src/components/PerformanceOptimizations.astro",url:void 0},Symbol.toStringTag,{value:"Module"}));export{p as P,f as a,u as b};
