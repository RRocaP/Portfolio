var e=Object.defineProperty,t=(t,i,n)=>((t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n)(t,"symbol"!=typeof i?i+"":i,n);import{R as i}from"./vendor-react.ofrPMlDn.js";class n{constructor(e={}){t(this,"animations",new Map),t(this,"intersectionObserver"),t(this,"resizeObserver"),t(this,"frameCount",0),t(this,"lastTime",0),t(this,"frameRateHistory",[]),t(this,"config"),t(this,"metrics",{totalAnimations:0,runningAnimations:0,completedAnimations:0,droppedFrames:0,averageFrameTime:0,performanceScore:100}),t(this,"animationQueue",[]),t(this,"isProcessingQueue",!1),t(this,"rafId",null),t(this,"memoryPressureThreshold",50),t(this,"lastMemoryCheck",0),t(this,"deviceCapabilities"),this.deviceCapabilities=this.detectDeviceCapabilities(),this.config={respectReducedMotion:!0,maxConcurrentAnimations:this.deviceCapabilities.maxConcurrentAnimations,frameRateThreshold:this.deviceCapabilities.isLowEnd?30:50,enablePerformanceMonitoring:!0,enableDebugMode:!1,enableGPUAcceleration:!0,enableWillChangeManagement:this.deviceCapabilities.supportsCSSContainment,enableHapticFeedback:!0,networkAwarePreloading:!0,...e},this.init()}detectDeviceCapabilities(){const e=navigator.hardwareConcurrency||4,t=navigator.deviceMemory||4,i=navigator.connection,n=t<=2||e<=2||i&&["slow-2g","2g","3g"].includes(i.effectiveType);return{isLowEnd:n,maxConcurrentAnimations:n?3:Math.min(8,2*e),supportsCSSContainment:CSS.supports("contain","layout"),supportsIntersectionObserver:"IntersectionObserver"in window}}init(){if(this.setupIntersectionObserver(),this.setupResizeObserver(),this.config.enablePerformanceMonitoring&&this.startPerformanceMonitoring(),this.config.respectReducedMotion){const e=window.matchMedia("(prefers-reduced-motion: reduce)");e.addEventListener("change",this.handleMotionPreferenceChange.bind(this)),e.matches&&this.pauseAllAnimations()}this.debugLog("AnimationController initialized")}register(e,t,i="load",n="medium"){this.animations.has(e)&&this.debugLog(`Animation ${e} already exists, updating...`);const s={id:e,element:t,type:i,priority:n,status:"idle",gpuAccelerated:!1,willChangeManaged:!1};this.animations.set(e,s),this.metrics.totalAnimations++,this.config.enableGPUAcceleration&&this.enableGPUAcceleration(t,s),"scroll"===i&&this.intersectionObserver&&this.intersectionObserver.observe(t),this.debugLog(`Registered animation: ${e} (${i}, ${n})`)}enableGPUAcceleration(e,t){t.gpuAccelerated||(e.style.transform=e.style.transform||"translateZ(0)",e.style.backfaceVisibility="hidden",e.style.perspective="1000px",t.gpuAccelerated=!0,this.debugLog(`GPU acceleration enabled for ${t.id}`))}manageWillChange(e,t,i){this.config.enableWillChangeManagement&&("running"!==t.status||t.willChangeManaged?"completed"===t.status&&t.willChangeManaged&&(e.style.willChange="auto",t.willChangeManaged=!1,this.debugLog(`will-change cleared for ${t.id}`)):(e.style.willChange=i.join(", "),t.willChangeManaged=!0,this.debugLog(`will-change set for ${t.id}: ${i.join(", ")}`)))}triggerHapticFeedback(e="light"){if(!this.config.enableHapticFeedback||!navigator.vibrate)return;navigator.vibrate({light:[10],medium:[20],heavy:[30]}[e])}animate(e,t,i={}){return new Promise((n,s)=>{const a=this.animations.get(e);if(!a)return void s(new Error(`Animation ${e} not registered`));if(this.shouldSkipAnimation())return this.debugLog(`Skipping animation ${e} due to reduced motion preference`),void n();if(this.metrics.runningAnimations>=this.config.maxConcurrentAnimations){if("low"===a.priority)return this.debugLog(`Skipping low-priority animation ${e} due to limit`),void n();this.cancelLowestPriorityAnimation()}const r=this.detectAnimatedProperties(t);this.manageWillChange(a.element,{...a,status:"running"},r);const o=a.element.animate(t,{duration:600,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)",composite:"replace",...i});a.animation=o,a.status="running",a.startTime=performance.now(),a.duration="number"==typeof i.duration?i.duration:600,a.options=i,this.metrics.runningAnimations++,"high"!==a.priority||"click"!==a.type&&"hover"!==a.type||this.triggerHapticFeedback("light"),o.addEventListener("finish",()=>{a.status="completed",this.metrics.runningAnimations--,this.metrics.completedAnimations++,this.manageWillChange(a.element,a,r),this.debugLog(`Animation ${e} completed`),n()}),o.addEventListener("cancel",()=>{a.status="cancelled",this.metrics.runningAnimations--,this.manageWillChange(a.element,a,r),this.debugLog(`Animation ${e} cancelled`),s(new Error(`Animation ${e} was cancelled`))}),this.debugLog(`Started animation: ${e}`)})}detectAnimatedProperties(e){const t=new Set;return e.forEach(e=>{Object.keys(e).forEach(e=>{"offset"!==e&&"easing"!==e&&"composite"!==e&&t.add(e)})}),Array.from(t)}pause(e){const t=this.animations.get(e);t?.animation&&"running"===t.status&&(t.animation.pause(),t.status="paused",this.metrics.runningAnimations--,this.debugLog(`Paused animation: ${e}`))}resume(e){const t=this.animations.get(e);t?.animation&&"paused"===t.status&&(t.animation.play(),t.status="running",this.metrics.runningAnimations++,this.debugLog(`Resumed animation: ${e}`))}cancel(e){const t=this.animations.get(e);t?.animation&&(t.animation.cancel(),t.status="cancelled",this.debugLog(`Cancelled animation: ${e}`))}pauseAllAnimations(){this.animations.forEach((e,t)=>{"running"===e.status&&this.pause(t)})}resumeAllAnimations(){this.animations.forEach((e,t)=>{"paused"===e.status&&this.resume(t)})}getState(e){return this.animations.get(e)}getMetrics(){return{...this.metrics}}onScroll(e,t,i,n={}){this.register(e,t,"scroll");const{threshold:s=.1,rootMargin:a="0px",...r}=n,o=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&n.target===t&&(this.animate(e,i,r),o.unobserve(t))})},{threshold:s,rootMargin:a});o.observe(t)}parallax(e,t,i=.5,n="low"){this.register(e,t,"parallax",n);let s=!1,a=null;const r=()=>{const e=window.pageYOffset,n=t.getBoundingClientRect(),a=n.top+e,r=n.height;if(e+window.innerHeight>a&&e<a+r){const n=(e-a)*i;t.style.transform=`translate3d(0, ${n}px, 0)`}s=!1};a=()=>{s||this.shouldSkipAnimation()||(requestAnimationFrame(r),s=!0)},window.addEventListener("scroll",a,{passive:!0});const o=this.animations.get(e);o&&(o.cleanup=()=>{a&&(window.removeEventListener("scroll",a),a=null)})}magneticButton(e,t,i=.3,n="medium"){if(this.register(e,t,"hover",n),this.shouldSkipAnimation())return;let s=!1,a=null;const r=this.animations.get(e);r&&this.config.enableGPUAcceleration&&this.enableGPUAcceleration(t,r),this.config.enableWillChangeManagement&&(t.style.willChange="transform"),t.addEventListener("mouseenter",()=>{s=!0,this.triggerHapticFeedback("light"),t.style.transition="transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)",t.style.boxShadow="0 0 20px rgba(59, 130, 246, 0.3)"}),t.addEventListener("mousemove",e=>{s&&(a&&cancelAnimationFrame(a),a=requestAnimationFrame(()=>{const n=t.getBoundingClientRect(),s=n.left+n.width/2,a=n.top+n.height/2,r=(e.clientX-s)*i,o=(e.clientY-a)*i,c=.1*(e.clientY-a),m=.1*(s-e.clientX);t.style.transform=`translate3d(${r}px, ${o}px, 0) scale(1.05) rotateX(${c}deg) rotateY(${m}deg)`}))}),t.addEventListener("mouseleave",()=>{s=!1,a&&(cancelAnimationFrame(a),a=null),t.style.transform="",t.style.boxShadow="",this.config.enableWillChangeManagement&&setTimeout(()=>{s||(t.style.willChange="auto")},300)}),t.addEventListener("click",()=>{this.triggerHapticFeedback("medium"),t.style.transform+=" scale(0.95)",setTimeout(()=>{s&&(t.getBoundingClientRect(),t.style.transform=t.style.transform.replace(" scale(0.95)",""))},100)})}stagger(e,t,i,n={}){const{staggerDelay:s=100,...a}=n,r=t.map((t,n)=>{const r=`${e}-${n}`;return this.register(r,t,"load","medium"),new Promise(e=>{setTimeout(()=>{this.animate(r,i,a).then(e)},n*s)})});return Promise.all(r)}setupIntersectionObserver(){this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target.dataset.animationId;if(t&&e.isIntersecting){const e=this.animations.get(t);e&&"idle"===e.status&&this.debugLog(`Element ${t} entered viewport`)}})},{threshold:.1,rootMargin:"0px 0px -50px 0px"})}setupResizeObserver(){this.resizeObserver=new ResizeObserver(e=>{const t=[];this.animations.forEach((e,i)=>{"running"===e.status&&(this.pause(i),t.push(i))}),setTimeout(()=>{t.forEach(e=>this.resume(e))},150)}),this.resizeObserver.observe(document.body)}startPerformanceMonitoring(){const e=t=>{if(this.frameCount++,this.lastTime){const e=t-this.lastTime;this.frameRateHistory.push(1e3/e),this.frameRateHistory.length>60&&this.frameRateHistory.shift();const i=this.frameRateHistory.reduce((e,t)=>e+t,0)/this.frameRateHistory.length;this.metrics.averageFrameTime=e,i<this.config.frameRateThreshold&&this.metrics.droppedFrames++,this.metrics.performanceScore=Math.max(0,Math.min(100,2*i)),this.metrics.performanceScore<60&&this.metrics.runningAnimations>3&&this.pauseLowestPriorityAnimations()}this.lastTime=t,requestAnimationFrame(e)};requestAnimationFrame(e)}shouldSkipAnimation(){return!!this.config.respectReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}cancelLowestPriorityAnimation(){let e=null;const t={low:0,medium:1,high:2};this.animations.forEach(i=>{"running"===i.status&&(!e||t[i.priority]<t[e.priority])&&(e=i)}),e&&this.cancel(e.id)}pauseLowestPriorityAnimations(){const e=Array.from(this.animations.values()).filter(e=>"running"===e.status&&"low"===e.priority);e.forEach(e=>this.pause(e.id)),this.debugLog(`Paused ${e.length} low-priority animations for performance`)}handleMotionPreferenceChange(e){e.matches?(this.pauseAllAnimations(),this.debugLog("Paused all animations due to reduced motion preference")):(this.resumeAllAnimations(),this.debugLog("Resumed animations due to motion preference change"))}debugLog(e){this.config.enableDebugMode}queueAnimation(e,t,i){this.animationQueue.push({id:e,priority:t,fn:i}),this.animationQueue.sort((e,t)=>{const i={high:3,medium:2,low:1};return i[t.priority]-i[e.priority]}),this.isProcessingQueue||this.processAnimationQueue()}async processAnimationQueue(){if(!this.isProcessingQueue&&0!==this.animationQueue.length){for(this.isProcessingQueue=!0;this.animationQueue.length>0&&this.metrics.runningAnimations<this.config.maxConcurrentAnimations;){if(this.isMemoryPressureHigh()){this.debugLog("Pausing queue processing due to memory pressure");break}if(this.metrics.performanceScore<40){this.debugLog("Pausing queue processing due to poor performance");break}const t=this.animationQueue.shift();if(t)try{await t.fn()}catch(e){}await new Promise(e=>setTimeout(e,16))}this.isProcessingQueue=!1,this.animationQueue.length>0&&setTimeout(()=>this.processAnimationQueue(),100)}}isMemoryPressureHigh(){const e=Date.now();if(e-this.lastMemoryCheck<5e3)return!1;if(this.lastMemoryCheck=e,"memory"in performance){return performance.memory.usedJSHeapSize/1048576>this.memoryPressureThreshold}return this.animations.size>20}performMemoryCleanup(){if(Array.from(this.animations.entries()).filter(([e,t])=>"completed"===t.status).forEach(([e])=>{this.animations.delete(e)}),this.isMemoryPressureHigh()){Array.from(this.animations.entries()).filter(([e,t])=>"running"===t.status&&"low"===t.priority).forEach(([e])=>{this.cancel(e)})}this.debugLog(`Memory cleanup performed. Active animations: ${this.animations.size}`)}animateQueued(e,t,i={},n="medium"){const s=()=>this.animate(e,t,i);return"high"===n&&this.metrics.runningAnimations<this.config.maxConcurrentAnimations?s():new Promise((t,i)=>{this.queueAnimation(e,n,async()=>{try{await s(),t()}catch(e){i(e)}})})}getMemoryStats(){let e=0;if("memory"in performance){e=performance.memory.usedJSHeapSize/1048576}return{usedMemoryMB:e,totalAnimations:this.animations.size,queueLength:this.animationQueue.length}}destroy(){this.pauseAllAnimations(),this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.animationQueue.length=0,this.isProcessingQueue=!1,this.animations.forEach(e=>{e.cleanup&&e.cleanup()}),this.intersectionObserver?.disconnect(),this.resizeObserver?.disconnect(),this.animations.clear(),this.debugLog("AnimationController destroyed")}}let s=null;function a(e){return s||(s=new n(e)),s}const r={fadeIn:[{opacity:0,transform:"translate3d(0, 30px, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}],slideUp:[{transform:"translate3d(0, 100px, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}],slideDown:[{transform:"translate3d(0, -100px, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}],fadeInUp:[{opacity:0,transform:"translate3d(0, 30px, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}],fadeInDown:[{opacity:0,transform:"translate3d(0, -30px, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}]};function o(){if("undefined"==typeof window)return!1;const[e,t]=i.useState(()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches);return i.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),i=e=>t(e.matches);return e.addEventListener("change",i),()=>e.removeEventListener("change",i)},[]),e}class c{constructor(e={}){t(this,"observer"),t(this,"elements",new Map),t(this,"animationQueue",new Set),t(this,"isReducedMotion",!1),t(this,"rafId",null),this.options=e,this.isReducedMotion=this.checkReducedMotion(),this.setupObserver(),this.setupMediaQueryListener()}checkReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}setupMediaQueryListener(){window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",e=>{this.isReducedMotion=e.matches,this.isReducedMotion&&this.disableAllAnimations()})}setupObserver(){this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&this.queueAnimation(e.target)})},{threshold:this.options.threshold||.1,rootMargin:this.options.rootMargin||"-30px 0px"})}queueAnimation(e){"complete"===e._animationState||this.isReducedMotion||(e._animationState="pending",this.animationQueue.add(e),this.rafId||(this.rafId=requestAnimationFrame(()=>this.processAnimationQueue())))}processAnimationQueue(){Array.from(this.animationQueue).sort((e,t)=>(e._animationDelay||0)-(t._animationDelay||0)).forEach((e,t)=>{const i=(e._animationDelay||0)+t*(this.options.stagger||80);setTimeout(()=>{this.animateElement(e)},i)}),this.animationQueue.clear(),this.rafId=null}animateElement(e){if("complete"===e._animationState)return;e._animationState="animating";const t=e.getAttribute("data-animation")||"fade-up",i=e.getAttribute("data-duration")||"600ms",n=e.getAttribute("data-easing")||"cubic-bezier(0.4, 0, 0.2, 1)",s=e;s.style.setProperty("--animation-duration",i),s.style.setProperty("--animation-easing",n),s.classList.add("animate-in",`animate-${t}`),setTimeout(()=>{e._animationState="complete",s.classList.add("animation-complete"),e._animationObserver&&e._animationObserver.unobserve(e)},this.parseTime(i))}parseTime(e){const t=parseFloat(e);return e.includes("s")&&!e.includes("ms")?1e3*t:t}disableAllAnimations(){this.elements.forEach((e,t)=>{const i=t;i.classList.add("animate-in","animation-complete"),i.style.transform="none",i.style.opacity="1"})}observe(e,t={}){document.querySelectorAll(e).forEach((e,i)=>{const n=e;n._animationDelay=i*(t.stagger||this.options.stagger||80),this.elements.set(e,{...this.options,...t}),this.isReducedMotion?e.classList.add("animate-in","animation-complete"):(this.observer.observe(e),n._animationObserver=this.observer)})}animate(e){this.isReducedMotion||this.queueAnimation(e)}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.observer.disconnect(),this.elements.clear(),this.animationQueue.clear()}getMetrics(){return{observedElements:this.elements.size,queuedAnimations:this.animationQueue.size,isReducedMotion:this.isReducedMotion}}}class m{constructor(){t(this,"buttons",new Set),t(this,"rafId",null),this.setupEventListeners()}setupEventListeners(){document.addEventListener("mousemove",this.handleMouseMove.bind(this),{passive:!0}),document.addEventListener("mouseleave",this.handleMouseLeave.bind(this),{passive:!0})}handleMouseMove(e){this.rafId||(this.rafId=requestAnimationFrame(()=>{this.buttons.forEach(t=>{this.updateButtonTransform(t,e)}),this.rafId=null}))}handleMouseLeave(){this.buttons.forEach(e=>{e.style.transform="translate3d(0, 0, 0)"})}updateButtonTransform(e,t){const i=e.getBoundingClientRect(),n=i.left+i.width/2,s=i.top+i.height/2,a=t.clientX-n,r=t.clientY-s,o=Math.sqrt(a*a+r*r),c=2*Math.min(i.width,i.height);if(o<c){const t=Math.max(0,1-o/c),i=a*t*.1,n=r*t*.1;e.style.transform=`translate3d(${i}px, ${n}px, 0)`}}observe(e){document.querySelectorAll(e).forEach(e=>{const t=e;t.style.transition="transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)",t.style.willChange="transform",this.buttons.add(t)})}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.buttons.forEach(e=>{e.style.transform="",e.style.transition="",e.style.willChange=""}),this.buttons.clear()}}class l{constructor(e="body"){t(this,"progressBar",null),t(this,"rafId",null),this.container=e,this.createProgressBar(),this.setupScrollListener()}createProgressBar(){this.progressBar=document.createElement("div"),this.progressBar.className="scroll-progress-bar",this.progressBar.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 0%;\n      height: 2px;\n      background: linear-gradient(90deg, #DA291C, #FFD93D);\n      z-index: 9999;\n      transition: width 0.1s ease-out;\n      will-change: width;\n    ",document.body.appendChild(this.progressBar)}setupScrollListener(){window.addEventListener("scroll",()=>{this.rafId||(this.rafId=requestAnimationFrame(()=>{this.updateProgress(),this.rafId=null}))},{passive:!0})}updateProgress(){if(!this.progressBar)return;const e=document.querySelector(this.container);if(!e)return;const t=window.pageYOffset,i=e.scrollHeight-window.innerHeight,n=Math.min(100,t/i*100);this.progressBar.style.width=`${n}%`}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.progressBar&&this.progressBar.remove()}}let h=null,u=null,d=null;function g(e={}){h&&h.destroy(),h=new c(e),h.observe("[data-animation]"),h.observe(".animate-on-scroll")}function p(){u&&u.destroy(),u=new m,u.observe(".btn-magnetic"),u.observe("[data-magnetic]")}function f(){d&&d.destroy(),d=new l}"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",()=>{g(),p(),f()});const b=Object.freeze(Object.defineProperty({__proto__:null,MagneticButtonController:m,ScrollAnimationController:c,ScrollProgressController:l,destroyAllAnimations:function(){h?.destroy(),u?.destroy(),d?.destroy(),h=null,u=null,d=null},initializeMagneticButtons:p,initializeScrollAnimations:g,initializeScrollProgress:f},Symbol.toStringTag,{value:"Module"}));export{r as a,a as g,b as s,o as u};
