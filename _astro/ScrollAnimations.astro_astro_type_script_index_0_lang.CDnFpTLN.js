var t=Object.defineProperty,e=(e,i,n)=>((e,i,n)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n)(e,"symbol"!=typeof i?i+"":i,n);import{g as i,a as n}from"./utils-graphics.Co9IcMZ8.js";import"./vendor-react.ofrPMlDn.js";import"./vendor-utils.gse-eQoW.js";class s{constructor(){e(this,"animationController",i({enableDebugMode:!1,enablePerformanceMonitoring:!0,respectReducedMotion:!0,enableGPUAcceleration:!0,enableWillChangeManagement:!0,enableHapticFeedback:!0,networkAwarePreloading:!0})),e(this,"scrollProgress"),e(this,"magneticButtons"),e(this,"parallaxElements"),e(this,"fadeElements"),e(this,"staggerElements"),e(this,"lastScrollY",0),e(this,"scrollVelocity",0),e(this,"scrollDirection","down"),e(this,"ticking",!1),e(this,"prefersReducedMotion"),e(this,"momentumScrollTimeout",null),e(this,"touchStartY",0),e(this,"isTouch",!1),this.scrollProgress=document.getElementById("scrollProgress"),this.magneticButtons=document.querySelectorAll(".magnetic-button, .btn-magnetic, button:not([data-no-magnetic])"),this.parallaxElements=document.querySelectorAll(".parallax-element, [data-parallax]"),this.fadeElements=document.querySelectorAll(".fade-in-element, [data-fade-in]"),this.staggerElements=document.querySelectorAll(".stagger-element, [data-stagger]"),this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,this.prefersReducedMotion||(this.init(),this.initMomentumDetection(),this.initTouchOptimizations())}init(){this.scrollProgress&&this.initScrollProgress(),this.magneticButtons.length>0&&this.initMagneticButtons(),this.parallaxElements.length>0&&this.initParallax(),this.fadeElements.length>0&&this.initFadeIn(),this.staggerElements.length>0&&this.initStagger(),this.initSmoothScroll()}initMomentumDetection(){let t=0;window.addEventListener("scroll",()=>{const e=window.pageYOffset,i=performance.now();if(t>0){const n=e-this.lastScrollY,s=i-t;this.scrollVelocity=n/s,this.scrollDirection=n>0?"down":"up",this.momentumScrollTimeout&&clearTimeout(this.momentumScrollTimeout),this.momentumScrollTimeout=setTimeout(()=>{this.scrollVelocity=0},100)}this.lastScrollY=e,t=i},{passive:!0})}initTouchOptimizations(){this.isTouch&&(this.magneticButtons.forEach(t=>{const e=t,i=e.getBoundingClientRect();if(i.width<44||i.height<44){e.style.position="relative";const t=document.createElement("div");t.style.cssText="\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            min-width: 44px;\n            min-height: 44px;\n            z-index: -1;\n          ",e.appendChild(t)}}),window.addEventListener("touchstart",t=>{this.touchStartY=t.touches[0].clientY},{passive:!0}),window.addEventListener("touchmove",t=>{const e=t.touches[0].clientY,i=this.touchStartY-e;Math.abs(i)>10&&(this.scrollDirection=i>0?"down":"up")},{passive:!0}))}initScrollProgress(){const t=()=>{const t=(window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;this.scrollProgress&&(this.scrollProgress.style.width=`${t}%`,Math.abs(this.scrollVelocity)>.5?this.scrollProgress.style.boxShadow=`0 0 ${Math.min(20,10*Math.abs(this.scrollVelocity))}px rgba(218, 41, 28, 0.8)`:this.scrollProgress.style.boxShadow="0 0 10px rgba(218, 41, 28, 0.5)")};window.addEventListener("scroll",()=>{this.ticking||(window.requestAnimationFrame(()=>{t(),this.ticking=!1}),this.ticking=!0)},{passive:!0})}initMagneticButtons(){this.magneticButtons.forEach((t,e)=>{const i=t,n=`magnetic-button-${e}`;this.animationController.magneticButton(n,i,.3,"medium")})}initParallax(){this.parallaxElements.forEach((t,e)=>{const i=t,n=parseFloat(i.dataset.parallaxSpeed||"0.5"),s=`parallax-element-${e}`;this.animationController.parallax(s,i,n,"low")})}initFadeIn(){this.batchElements(Array.from(this.fadeElements),8).forEach((t,e)=>{setTimeout(()=>{this.createFadeInObserver(t,e)},50*e)})}batchElements(t,e){const i=[];for(let n=0;n<t.length;n+=e)i.push(t.slice(n,n+e));return i}createFadeInObserver(t,e){const i={threshold:.1,rootMargin:this.isTouch?"50px 0px -5% 0px":"100px 0px -10% 0px"},n=new IntersectionObserver(t=>{requestAnimationFrame(()=>{t.forEach(t=>{t.isIntersecting&&this.triggerFadeInAnimation(t.target,n)})})},i);t.forEach(i=>{const s=i,o=`fade-in-batch${e}-${t.indexOf(s)}`;this.animationController.register(o,s,"scroll","medium"),n.observe(s)})}triggerFadeInAnimation(t,e){const i=t.dataset.fadeId||`fade-in-${Date.now()}-${Math.random()}`;t.dataset.fadeId=i;let s=n.fadeInUp,o=600;"up"===this.scrollDirection&&(s=n.fadeInDown),this.isTouch||this.prefersReducedMotion?(o=300,s=n.fadeIn):o=Math.max(400,Math.min(800,600-50*Math.abs(this.scrollVelocity))),this.animationController.animateQueued(i,s,{duration:o,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)",fill:"forwards"},"medium").catch(()=>{t.style.cssText+="\n          opacity: 1 !important;\n          transform: translateY(0) !important;\n          transition: opacity 0.3s ease, transform 0.3s ease;\n        "}),e.unobserve(t)}initStagger(){this.batchElements(Array.from(this.staggerElements),4).forEach((t,e)=>{setTimeout(()=>{this.createStaggerObserver(t,e)},100*e)})}createStaggerObserver(t,e){t.forEach((t,i)=>{const n=t,s=Array.from(n.children),o=`stagger-batch${e}-group${i}`;if(0===s.length)return;const r=this.isTouch?6:s.length,a=s.slice(0,r),l=new IntersectionObserver(t=>{requestAnimationFrame(()=>{t.forEach(t=>{t.isIntersecting&&this.triggerStaggerAnimation(a,o,l,t.target)})})},{threshold:.1,rootMargin:this.isTouch?"25px 0px -15% 0px":"50px 0px -25% 0px"});l.observe(n)})}triggerStaggerAnimation(t,e,i,s){let o=n.fadeInUp,r=600,a=80;this.isTouch?(r=400,a=60,o=n.fadeIn):o="up"===this.scrollDirection&&Math.abs(this.scrollVelocity)>.3?n.slideDown:n.slideUp,this.prefersReducedMotion&&(r=200,a=0,o=n.fadeIn);const l=a*Math.max(.5,Math.min(1.5,1-.3*Math.abs(this.scrollVelocity))),c=Math.min(l,1500/t.length);this.animationController.stagger(e,t,o,{duration:r,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)",staggerDelay:c,fill:"forwards"}).catch(()=>{t.forEach((t,e)=>{setTimeout(()=>{t.style.cssText+="\n              opacity: 1 !important;\n              transform: translateY(0) !important;\n              transition: opacity 0.2s ease;\n            "},50*e)})}),i.unobserve(s)}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=document.querySelector(t.getAttribute("href")||"");if(i){const t=80,e=i.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:e,behavior:"smooth"})}})})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>new s):new s,window.ScrollAnimations=s;
